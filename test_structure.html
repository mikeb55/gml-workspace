<!DOCTYPE html>
<html>
<head>
    <title>Structure Generator Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1a2e; color: white; }
        .section { background: rgba(255,255,255,0.1); padding: 15px; margin: 10px; border-radius: 8px; }
        button { background: #4CAF50; color: white; padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        select { padding: 8px; margin: 5px; }
        #output { background: rgba(0,0,0,0.5); padding: 20px; border-radius: 10px; white-space: pre; font-family: monospace; }
    </style>
</head>
<body>
    <h1>5-Minute Composition Structure Generator</h1>
    
    <div class="section">
        <label>Form:</label>
        <select id="form">
            <option value="ABA">ABA (Classic)</option>
            <option value="RONDO">Rondo</option>
            <option value="SONATA">Sonata</option>
            <option value="THROUGHCOMPOSED">Through-Composed</option>
        </select>
        
        <label>Duration (minutes):</label>
        <input type="number" id="duration" value="5" min="1" max="10">
        
        <button onclick="generateStructure()">Generate Structure</button>
        <button onclick="applyToQuintet()">Apply to Quintet</button>
    </div>
    
    <div id="output"></div>
    
    <script src="structure_generator.js"></script>
    <script>
        const generator = new StructureGenerator();
        let currentStructure = null;
        
        function generateStructure() {
            const form = document.getElementById('form').value;
            const duration = parseInt(document.getElementById('duration').value);
            
            currentStructure = generator.generateStructure(duration, form);
            
            let output = `STRUCTURE: ${form} - ${duration} minutes\n`;
            output += '='.repeat(50) + '\n\n';
            
            currentStructure.forEach((section, i) => {
                output += `${i+1}. ${section.name.toUpperCase()}\n`;
                output += `   Bars: ${section.bars} (${section.duration})\n`;
                output += `   Key: ${section.key}\n`;
                output += `   Dynamics: ${section.dynamics}\n`;
                output += `   Texture: ${section.texture}\n\n`;
            });
            
            const totalBars = currentStructure.reduce((sum, s) => sum + s.bars, 0);
            output += `\nTOTAL: ${totalBars} bars (~${Math.round(totalBars * 2)} seconds at 120bpm)`;
            
            document.getElementById('output').textContent = output;
        }
        
        function applyToQuintet() {
            if (!currentStructure) generateStructure();
            
            const quintetStructure = generator.applyToQuintet(currentStructure);
            
            let output = 'QUINTET ARRANGEMENT\n';
            output += '='.repeat(50) + '\n\n';
            
            quintetStructure.forEach((section, i) => {
                output += `${section.name.toUpperCase()}\n`;
                output += `  Violin I:  ${section.violin1}\n`;
                output += `  Violin II: ${section.violin2}\n`;
                output += `  Viola:     ${section.viola}\n`;
                output += `  Cello:     ${section.cello}\n`;
                output += `  Bass:      ${section.bass}\n\n`;
            });
            
            document.getElementById('output').textContent = output;
        }
        
        // Auto-generate on load
        generateStructure();
    </script>
</body>
</html>
